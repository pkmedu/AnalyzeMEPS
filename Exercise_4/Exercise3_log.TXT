NOTE: PROCEDURE PRINTTO used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1697  
1698  
1699  proc datasets lib=work nolist kill;
NOTE: Deleting WORK.FORMATS (memtype=CATALOG).
NOTE: Deleting WORK.MEPS_1718 (memtype=DATA).
NOTE: Deleting WORK.MEPS_2017 (memtype=DATA).
NOTE: Deleting WORK.MEPS_2018 (memtype=DATA).
NOTE: Deleting WORK.SASMACR (memtype=CATALOG).
NOTE: File WORK.SASMACR (memtype=CATALOG) cannot be deleted because it is in use.
1699!                                     quit;

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1699!                                           /* Delete  all files in the WORK library */
1700  OPTIONS LS=132 PS=79 NODATE FORMCHAR="|----|+|---+=|-/\<>*"  VARLENCHK=NOWARN PAGENO=1;
1701  
1702  
1703  PROC FORMAT;
1704  
1705    VALUE totexp_fmt
1706        0         = 'No Expense'
1707        Other     = 'Any Expense';
NOTE: Format TOTEXP_FMT has been output.
1708  
1709    VALUE agecat_fmt
1710         18-49 = '18-49'
1711         50-64 = '50-64'
1712         65-high= '65+';
NOTE: Format AGECAT_FMT has been output.
1713  
1714  
1715       value yes_no_fmt
1716        1 = 'Yes'
1717        0,2 = 'No';
NOTE: Format YES_NO_FMT has been output.
1718  
1719  
1720  run;

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1721  ***************  MEPS 2017;
1722  %LET DataFolder = C:\DATA\MySDS;  /* Adjust the folder name, if needed */
1723  libname CDATA "&DataFolder";
NOTE: Libref CDATA was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: C:\DATA\MySDS
1724  
1725  %let kept_vars_2017 =  VARSTR VARPSU perwt17f agelast ARTHDX JTPAIN31 totexp17 totslf17;
1726  data meps_2017;
1727   set CDATA.h201 (keep= &kept_vars_2017
1728                   rename=(totexp17=totexp
1729                           totslf17=totslf));
1730    perwtf = perwt17f/2;;
1731  
1732  
1733     * Create a subpopulation indicator called SPOP
1734      and a new variable called JOINT_PAIN  based on ARTHDX and JTPAIN31;
1735  
1736     spop=0;
1737     if agelast>=18 and not (ARTHDX <=0 and JTPAIN31 <0) then do;
1738        SPOP=1;
1739       if ARTHDX=1 | JTPAIN31=1 then joint_pain =1;
1740       else joint_pain=0;
1741     end;
1742  run;

NOTE: There were 31880 observations read from the data set CDATA.H201.
NOTE: The data set WORK.MEPS_2017 has 31880 observations and 11 variables.
NOTE: DATA statement used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds
      

1743  
1744  
1745  *** 2018 MEPS ;
1746  
1747  %let kept_vars_2018 =  VARSTR VARPSU perwt18f agelast ARTHDX JTPAIN31_M18 totexp18 totslf18;
1748  data meps_2018;
1749   set CDATA.h209 (keep= &kept_vars_2018
1750                   rename=(totexp18=totexp
1751                           totslf18=totslf));
1752    perwtf = perwt18f/2;
1753  
1754    * Create a subpopulation indicator called SPOP
1755      and a new variable called JOINT_PAIN  based on ARTHDX and JTPAIN31_M18;
1756  
1757     spop=0;
1758     if agelast>=18 and not (ARTHDX <=0 and JTPAIN31_M18 <0) then do;
1759        SPOP=1;
1760       if ARTHDX=1 | JTPAIN31_M18=1 then joint_pain =1;
1761       else joint_pain=0;
1762     end;
1763  run;

NOTE: There were 30461 observations read from the data set CDATA.H209.
NOTE: The data set WORK.MEPS_2018 has 30461 observations and 11 variables.
NOTE: DATA statement used (Total process time):
      real time           0.09 seconds
      cpu time            0.09 seconds
      

1764  
1765  
1766  **** Concatenate 2017 and 2018 analytic data files;
1767  
1768  data MEPS_1718;
1769    set meps_2017(rename=(JTPAIN31 = JTPAIN))
1770        meps_2018 (rename=(JTPAIN31_M18 = JTPAIN));
1771         TOTEXP_X = TOTEXP;
1772  run;

NOTE: There were 31880 observations read from the data set WORK.MEPS_2017.
NOTE: There were 30461 observations read from the data set WORK.MEPS_2018.
NOTE: The data set WORK.MEPS_1718 has 62341 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1773  
1774  
1775  
1776  title 'MEPS 2017-18 combined';
1777  
1778  proc freq data=MEPS_1718;
1779  tables ARTHDX*JTPAIN*joint_pain
1780         ARTHDX*JTPAIN*spop
1781         spop joint_pain /list missing;
1782  run;

NOTE: There were 62341 observations read from the data set WORK.MEPS_1718.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

1783  
1784  title 'MEPS 2017-18 combined';
1785  ods exclude statistics;
1786  PROC SURVEYMEANS DATA=meps_1718  nobs mean sum ;
1787      VAR joint_pain totexp totslf;
1788      STRATUM VARSTR ;
1789      CLUSTER VARPSU;
1790      WEIGHT perwtf;
1791      domain spop('1');
1792      class joint_pain;
1793      format joint_pain yes_no_fmt. ;
1794  RUN;

NOTE: Due to nonpositive weights, 2210 observation(s) were deleted.
NOTE: Only one cluster in a stratum for spop domains for variable(s) totexp, totslf, joint_pain. The estimate of variance for 
      totexp, totslf, joint_pain will omit this stratum.
NOTE: PROCEDURE SURVEYMEANS used (Total process time):
      real time           1.29 seconds
      cpu time            1.15 seconds
      

1795  
1796  title 'MEPS 2017-18 combined';
1797  ods exclude statistics;
1798  PROC SURVEYMEANS DATA=meps_1718  nobs mean sum median;
1799      VAR totexp totslf;
1800      STRATUM VARSTR ;
1801      CLUSTER VARPSU;
1802      WEIGHT perwtf;
1803      domain spop('1')*joint_pain;
1804      format joint_pain yes_no_fmt.  ;
1805  ;
1806  RUN;

NOTE: Due to nonpositive weights, 2210 observation(s) were deleted.
NOTE: PROCEDURE SURVEYMEANS used (Total process time):
      real time           1.20 seconds
      cpu time            0.98 seconds
      

1807  
1808  title 'MEPS 2017-18 combined / with any expense';
1809  ods exclude statistics;
1810  PROC SURVEYMEANS DATA=meps_1718  nobs mean sum median;
1811      VAR totexp totslf;
1812      STRATUM VARSTR ;
1813      CLUSTER VARPSU;
1814      WEIGHT perwtf;
1815      domain spop('1')*totexp_x('Any Expense')*joint_pain;
1816      format joint_pain yes_no_fmt.   totexp_x totexp_fmt.;
1817  ;
1818  RUN;

NOTE: Due to nonpositive weights, 2210 observation(s) were deleted.
NOTE: Only one cluster in a stratum for spop*TOTEXP_X*joint_pain domains for variable(s) totexp, totslf. The estimate of variance 
      for totexp, totslf will omit this stratum.
NOTE: PROCEDURE SURVEYMEANS used (Total process time):
      real time           1.40 seconds
      cpu time            1.26 seconds
      

1819  
1820  proc printto;
1821  run;

