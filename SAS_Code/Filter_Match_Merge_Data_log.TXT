NOTE: PROCEDURE PRINTTO used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1783  
1784  
1785  /* Clear log, output, and ODSRESULTS from the previous run automatically */
1786  DM "Log; clear; output; clear; odsresults; clear";
1787  
1788  /* Delete all files in the WORK library */
1789  proc datasets lib=work nolist kill;
NOTE: Deleting WORK.PSAQ_DATA (memtype=DATA).
NOTE: Deleting WORK.PSAQ_FRAME_2013 (memtype=DATA).
NOTE: Deleting WORK.SASMACR (memtype=CATALOG).
NOTE: File WORK.SASMACR (memtype=CATALOG) cannot be deleted because it is in use.
1789!                                     quit;

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

1790  
1791  options nocenter nodate nonumber obs=max formchar="|----|+|---+=|-/\<>*";
1792  libname library 'C:\Data';
NOTE: Libref LIBRARY refers to the same physical library as SDS.
NOTE: Libref LIBRARY was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: C:\Data
1793  libname sds 'C:\Data';
NOTE: Libref SDS refers to the same physical library as LIBRARY.
NOTE: Libref SDS was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: C:\Data
1793!                           /* Assign libref to the output SAS data set */
1794  
1795  /* Use LIBRARY= option only specifies libref to store formats
1796     permanently in libref.formats */
1797  
1798  proc format LIBRARY=library;
1799  
1800  value age_f
1801      35-64 = 'Ages 35-64'
1802      65-High ='Ages 65+';
NOTE: Format AGE_F is already on the library LIBRARY.FORMATS.
NOTE: Format AGE_F has been written to LIBRARY.FORMATS.
1803  
1804  value resp53_fmt 1 = 'Self-Respondent'
1805                    2 = 'Household Proxy';
NOTE: Format RESP53_FMT is already on the library LIBRARY.FORMATS.
NOTE: Format RESP53_FMT has been written to LIBRARY.FORMATS.
1806  
1807  value sex_fmt   1 = 'Male'
1808                  2 = 'Female';
NOTE: Format SEX_FMT is already on the library LIBRARY.FORMATS.
NOTE: Format SEX_FMT has been written to LIBRARY.FORMATS.
1809  
1810  
1811  VALUE Racethx2_fmt
1812    1 = 'NH White Only'
1813    2 = 'Racial/Ethnic Minority' ;
NOTE: Format RACETHX2_FMT is already on the library LIBRARY.FORMATS.
NOTE: Format RACETHX2_FMT has been written to LIBRARY.FORMATS.
1814  
1815   value edu2_fmt
1816             1 = 'Up to High School'
1817             2 = 'Some College';
NOTE: Format EDU2_FMT is already on the library LIBRARY.FORMATS.
NOTE: Format EDU2_FMT has been written to LIBRARY.FORMATS.
1818  
1819  value povcat_fmt
1820     1 = 'P/NPR/LOW INCOME'
1821     2 = 'MIDDLE INCOME'
1822     3 = 'HIGH INCOME'
1823     4 = 'Missing';
NOTE: Format POVCAT_FMT is already on the library LIBRARY.FORMATS.
NOTE: Format POVCAT_FMT has been written to LIBRARY.FORMATS.
1824  
1825  
1826    VALUE HEALTH_fmt
1827        1='EXCELLENT/VERY GOOD'
1828        2 ='GOOD'
1829        3='FAIR/POOR'
1830        4='MISSING';
NOTE: Format HEALTH_FMT is already on the library LIBRARY.FORMATS.
NOTE: Format HEALTH_FMT has been written to LIBRARY.FORMATS.
1831  
1832  
1833    value Marital_fmt
1834          1 = 'Currently Married'
1835          2 = 'Wid-Div-Sep'
1836          3 = 'Never married';
NOTE: Format MARITAL_FMT is already on the library LIBRARY.FORMATS.
NOTE: Format MARITAL_FMT has been written to LIBRARY.FORMATS.
1837  
1838    value emp_fmt 1 = 'Employed'
1839                2 = 'Not Employed';
NOTE: Format EMP_FMT is already on the library LIBRARY.FORMATS.
NOTE: Format EMP_FMT has been written to LIBRARY.FORMATS.
1840  
1841    value fms_fmt 1 = '1 Person'
1842                  2 =  '2 Persons'
1843                  3 =  '3 Persons'
1844                  4 =  '4+ Persons';
NOTE: Format FMS_FMT is already on the library LIBRARY.FORMATS.
NOTE: Format FMS_FMT has been written to LIBRARY.FORMATS.
1845  
1846    VALUE inscov_fmt
1847          1='ANY PRIVATE'
1848          2='PUBLIC ONLY'
1849          3='UNINSURED';
NOTE: Format INSCOV_FMT is already on the library LIBRARY.FORMATS.
NOTE: Format INSCOV_FMT has been written to LIBRARY.FORMATS.
1850  
1851    value obv10_p_fmt 1 = '10+ Office-based visits'
1852              2 = '0-9 Office-based visits';
NOTE: Format OBV10_P_FMT is already on the library LIBRARY.FORMATS.
NOTE: Format OBV10_P_FMT has been written to LIBRARY.FORMATS.
1853  
1854    value region_fmt
1855        1 = 'Northeast'
1856        2 = 'Midwest'
1857        3 = 'South'
1858        4 = 'West';
NOTE: Format REGION_FMT is already on the library LIBRARY.FORMATS.
NOTE: Format REGION_FMT has been written to LIBRARY.FORMATS.
1859  
1860  
1861  run;

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1862  
1863  
1864  *** Create a macro variable that holds variable names from the 20113 MEPS;
1865  
1866  %let kept_vars = dupersid resp53 perwt13f varstr varpsu agelast sex INSURC13
1867                   edrecode povcat13 racethx resp53 RTHLTH53 totexp13
1868                   OBVEXP13 OPTEXP13 ERTEXP13  IPTEXP13 RXEXP13
1869                   MARRY53X FAMSZE53 EMPST53 REGION53
1870                   inscov13 obtotv13 IPNGTD13
1871                   panel insc1231;
1872  
1873  **** Create a temporary SAS data file (PSAQ Frame) with source and derived variables
1874                   from the 2013 MEPS Full Year File based on certain conditions;
1875  
1876   /* PUFMEPS below is the iibref to the input data set, which is assigned in the AUTOEXEC.SAS file */
1877   /*%put %str(%sysfunc(getoption(autoexec))); */
1878  
1879  Data work.PSAQ_Frame_2013;
1880    set pufmeps.h163 (keep=&kept_vars
1881                       where = (panel = 18
1882                                & insc1231=1
1883                                & agelast >=34
1884                                & perwt13f>0 )
1885                      );
1886  
1887            *** Racethx_x variable (Dichotomous);
1888            if racethx =2 then r_racethx2 = 1;
1889            else if racethx in (1,3,4,5) then r_racethx2 = 2;
1890            else if racethx in (-7,-8,-9) then r_racethx2 = .;
1891  
1892  
1893           *** New education variable (dichotomous);
1894            if edrecode in (1,2,13) then r_edrecode2=1; /* up to high school */
1895            else if edrecode in (14,15,16) then r_edrecode2=2;   /* Some College  */
1896            else if edrecode in (-1,-7,-8,-9) then r_edrecode2 = .; /* Missing/NA */
1897  
1898  
1899           *** Marital Status;
1900            if MARRY53X in (-7,-8,-9,6) then marital_s = .;
1901            else if MARRY53X in (1,7) then marital_s = 1;
1902            else if MARRY53X in (2,3,4,8,9,10) then marital_s = 2;
1903            else if MARRY53X = 5 then marital_s = 3;
1904  
1905  
1906  
1907           *** Family size;
1908           if FAMSZE53 = 1 then d_famscat=1;
1909           else if FAMSZE53  = 2 then d_famscat=2;
1910           else if FAMSZE53  = 3 then d_famscat=3;
1911           else if FAMSZE53 >=4 then d_famscat=4;
1912  
1913           *** Employment status;
1914           if EMPST53 =1 then empstat13=1;
1915           else if EMPST53 in (2,3,4) then empstat13=2;  /*Need to check */
1916  
1917               *** New POVCAT variable;
1918            if povcat13 in (1,2,3 ) then r_povcat = 1;
1919            else if povcat13 =4 then r_povcat = 2;
1920            else if povcat13 =5 then r_povcat = 3;
1921            else if povcat13 in (-7,-8,-9) then r_povcat = 4;
1922  
1923  
1924           *** Region;
1925           r_region = region53;
1926           if region53 = -1 then r_region = .;
1927  
1928           * New Perceived health status variable;
1929  
1930            if RTHLTH53 in (1,2) then health = 1;
1931            else if RTHLTH53 = 3 then health = 2;
1932            else if RTHLTH53 in (4,5) then health = 3;
1933            else if RTHLTH53 in (-7,-8,-9) then health = 4;
1934  
1935           *** office-based provider visits;
1936              if obtotv13 >=10 then obv10_plus=1;
1937             else obv10_plus = 2;
1938  
1939  
1940    run;

NOTE: There were 8407 observations read from the data set PUFMEPS.H163.
      WHERE (panel=18) and (insc1231=1) and (agelast>=34) and (perwt13f>0);
NOTE: The data set WORK.PSAQ_FRAME_2013 has 8407 observations and 36 variables.
NOTE: DATA statement used (Total process time):
      real time           27.03 seconds
      cpu time            0.87 seconds
      

1941  
1942  * Sort the data files before merging them in a DATA step;
1943  proc sort data=PSAQ_Frame_2013; by dupersid;
1944  run;

NOTE: There were 8407 observations read from the data set WORK.PSAQ_FRAME_2013.
NOTE: The data set WORK.PSAQ_FRAME_2013 has 8407 observations and 36 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1945  proc sort data=pufmeps.h173 out=work.PSAQ_data;  /* Create a temporary sorted data set */
1946     by dupersid;
1947  run;

NOTE: There were 2185 observations read from the data set PUFMEPS.H173.
NOTE: The data set WORK.PSAQ_DATA has 2185 observations and 50 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.20 seconds
      cpu time            0.01 seconds
      

1948  
1949  * Create a PSAQ analytic data file by mergeing the PSAQ data file with the FRAME data file;
1950  
1951  data sds.MEPS_WShop_PSAQ;
1952    merge work.psaq_data (in=a)
1953          work.PSAQ_Frame_2013; by dupersid;
1954  
1955          * Create a new PSAQ age  variable replacing -9 with a value from age53x;
1956    x_psaqage = psaqage;
1957    if psaqage = -9 then x_psaqage=age53x;
1958  
1959    * Create a new flushot variable ;
1960    if flushot = 1 then x_flushot = 1;
1961    else if flushot = 2 then x_flushot = 0;
1962    else if flushot = -9 then x_flushot = .;
1963  
1964    * Create a Smoke_Every_day variable;
1965  
1966    if ofttobac = -9 then x_ofttobac = .;
1967    else if ofttobac = 1 then x_ofttobac = 1;
1968    else if ofttobac in (2,3) then x_ofttobac = 0;
1969  
1970  
1971  
1972    if a;     /* uniquely identifies the source data set and keeps the same number
1973                 of observations in the output data set */
1974  run;

NOTE: There were 2185 observations read from the data set WORK.PSAQ_DATA.
NOTE: There were 8407 observations read from the data set WORK.PSAQ_FRAME_2013.
NOTE: The data set SDS.MEPS_WSHOP_PSAQ has 2185 observations and 84 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1975  
1976  title '2014 PSAQ Analytic File - Frequency Tables for Selected Variables';
1977  proc freq data=sds.MEPS_WShop_PSAQ;
1978  tables resp53 sex r_racethx2 r_edrecode2 marital_s d_famscat empstat13 r_povcat r_region health inscov13 obv10_plus;
1979  format
1980      resp53 resp53_fmt.
1981      sex sex_fmt.
1982      r_racethx2 Racethx2_fmt.
1983      r_edrecode2 edu2_fmt.
1984      marital_s marital_fmt.
1985      d_famscat fms_fmt.
1986      empstat13 emp_fmt.
1987      r_povcat povcat_fmt.
1988      r_region region_fmt.
1989      health  health_fmt.
1990      inscov13 inscov_fmt.
1991      obv10_plus obv10_p_fmt.;
1992  run;

NOTE: There were 2185 observations read from the data set SDS.MEPS_WSHOP_PSAQ.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

1993  
1994  
1995  *** Check the range of variables in the data set create;
1996  *proc means data=sds.MEPS_WShop_PSAQ;
1997  *run;
1998  
1999  proc printto;
2000  run;

