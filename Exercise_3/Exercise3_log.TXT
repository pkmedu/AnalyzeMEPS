NOTE: PROCEDURE PRINTTO used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

980  
981  
982  proc datasets lib=work nolist kill;
NOTE: Deleting WORK.FORMATS (memtype=CATALOG).
NOTE: Deleting WORK.MEPS_1718 (memtype=DATA).
NOTE: Deleting WORK.MEPS_2017 (memtype=DATA).
NOTE: Deleting WORK.MEPS_2018 (memtype=DATA).
NOTE: Deleting WORK.SASMACR (memtype=CATALOG).
NOTE: File WORK.SASMACR (memtype=CATALOG) cannot be deleted because it is in use.
982!                                     quit;

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

982!                                           /* Delete  all files in the WORK library */
983  OPTIONS LS=132 PS=79 NODATE FORMCHAR="|----|+|---+=|-/\<>*"  VARLENCHK=NOWARN PAGENO=1;
984  
985  
986  PROC FORMAT;
987  
988    VALUE totexp_fmt
989        0         = 'No Expense'
990        Other     = 'Any Expense';
NOTE: Format TOTEXP_FMT has been output.
991  
992    VALUE agecat_fmt
993         18-49 = '18-49'
994         50-64 = '50-64'
995         65-high= '65+';
NOTE: Format AGECAT_FMT has been output.
996  
997  
998       value yes_no_fmt
999        1 = 'Yes'
1000        2 = 'No';
NOTE: Format YES_NO_FMT has been output.
1001  
1002  
1003  run;

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1004  ***************  MEPS 2017;
1005  %LET DataFolder = C:\DATA\MySDS;  /* Adjust the folder name, if needed */
1006  libname CDATA "&DataFolder";
NOTE: Libref CDATA was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: C:\DATA\MySDS
1007  
1008  %let kept_vars_2017 =  VARSTR VARPSU perwt17f agelast ARTHDX JTPAIN31 totexp17 totslf17;
1009  data meps_2017;
1010   set CDATA.h201 (keep= &kept_vars_2017
1011                   rename=(totexp17=totexp
1012                           totslf17=totslf));
1013    perwtf = perwt17f/2;;
1014  
1015  
1016     * Create a subpopulation indicator called SPOP
1017      and a new variable called JOINT_PAIN  based on ARTHDX and JTPAIN31;
1018  
1019     spop=2;
1020     if agelast>=18 and not (ARTHDX <=0 and JTPAIN31 <0) then do;
1021        SPOP=1;
1022       if ARTHDX=1 | JTPAIN31=1 then joint_pain =1;
1023       else joint_pain=2;
1024     end;
1025  
1026     label totexp = 'TOTAL HEALTH CARE EXP'
1027           totslf = 'TOTAL AMOUNT PAID - SELF-FAMILY';
1028  run;

NOTE: There were 31880 observations read from the data set CDATA.H201.
NOTE: The data set WORK.MEPS_2017 has 31880 observations and 11 variables.
NOTE: DATA statement used (Total process time):
      real time           0.07 seconds
      cpu time            0.07 seconds
      

1029  
1030  
1031  *** 2018 MEPS ;
1032  
1033  %let kept_vars_2018 =  VARSTR VARPSU perwt18f agelast ARTHDX JTPAIN31_M18 totexp18 totslf18;
1034  data meps_2018;
1035   set CDATA.h209 (keep= &kept_vars_2018
1036                   rename=(totexp18=totexp
1037                           totslf18=totslf));
1038    perwtf = perwt18f/2;
1039  
1040    * Create a subpopulation indicator called SPOP
1041      and a new variable called JOINT_PAIN  based on ARTHDX and JTPAIN31_M18;
1042  
1043     spop=2;
1044     if agelast>=18 and not (ARTHDX <=0 and JTPAIN31_M18 <0) then do;
1045        SPOP=1;
1046       if ARTHDX=1 | JTPAIN31_M18=1 then joint_pain =1;
1047       else joint_pain=2;
1048     end;
1049  run;

NOTE: There were 30461 observations read from the data set CDATA.H209.
NOTE: The data set WORK.MEPS_2018 has 30461 observations and 11 variables.
NOTE: DATA statement used (Total process time):
      real time           0.09 seconds
      cpu time            0.09 seconds
      

1050  
1051  
1052  **** Concatenate 2017 and 2018 analytic data files;
1053  
1054  data MEPS_1718;
1055    set meps_2017(rename=(JTPAIN31 = JTPAIN))
1056        meps_2018 (rename=(JTPAIN31_M18 = JTPAIN));
1057         TOTEXP_X = TOTEXP;
1058  run;

NOTE: There were 31880 observations read from the data set WORK.MEPS_2017.
NOTE: There were 30461 observations read from the data set WORK.MEPS_2018.
NOTE: The data set WORK.MEPS_1718 has 62341 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

1059  
1060  
1061  
1062  title 'MEPS 2017-18 combined';
1063  
1064  proc freq data=MEPS_1718;
1065  tables ARTHDX*JTPAIN*joint_pain
1066         ARTHDX*JTPAIN*spop
1067         spop joint_pain /list missing;
1068  run;

NOTE: There were 62341 observations read from the data set WORK.MEPS_1718.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

1069  
1070  title 'MEPS 2017-18 combined';
1071  ods exclude statistics;
1072  PROC SURVEYMEANS DATA=meps_1718  nobs mean stderr sum ;
1073      VAR joint_pain ;
1074      STRATUM VARSTR ;
1075      CLUSTER VARPSU;
1076      WEIGHT perwtf;
1077      domain spop('1');
1078      class joint_pain;
1079      format joint_pain yes_no_fmt. ;
1080  RUN;

NOTE: Due to nonpositive weights, 2210 observation(s) were deleted.
NOTE: Only one cluster in a stratum for spop domains for variable(s) joint_pain. The estimate of variance for joint_pain will omit 
      this stratum.
NOTE: PROCEDURE SURVEYMEANS used (Total process time):
      real time           0.09 seconds
      cpu time            0.09 seconds
      

1081  
1082  title 'MEPS 2017-18 combined';
1083  ods exclude statistics;
1084  PROC SURVEYMEANS DATA=meps_1718  nobs mean stderr sum;
1085      VAR totexp totslf;
1086      STRATUM VARSTR ;
1087      CLUSTER VARPSU;
1088      WEIGHT perwtf;
1089      domain spop('1')*joint_pain;
1090      format joint_pain yes_no_fmt.  ;
1091  ;
1092  RUN;

NOTE: Due to nonpositive weights, 2210 observation(s) were deleted.
NOTE: PROCEDURE SURVEYMEANS used (Total process time):
      real time           0.09 seconds
      cpu time            0.09 seconds
      

1093  proc printto;
1094  run;

